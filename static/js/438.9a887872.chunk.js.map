{"version":3,"file":"static/js/438.9a887872.chunk.js","mappings":"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","sources":["components/usuario/perfil.tsx","utils/auth.ts"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport '../../assets/css/Perfil.css';\r\nimport '../../assets/css/barra.css';\r\nimport '../../assets/css/general.css';\r\nimport '../../assets/css/fondo.css';\r\nimport { getLoggedInUser, updateUserInLocalStorage } from '../../utils/auth';\r\nimport { User } from '../../utils/users';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Perfil: React.FC = () => {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [editableUser, setEditableUser] = useState<User | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    const loggedInUser = getLoggedInUser();\r\n    if (loggedInUser) {\r\n      setUser(loggedInUser);\r\n      setEditableUser({ ...loggedInUser });\r\n    }\r\n    setLoading(false);\r\n  }, []);\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n    if (editableUser) {\r\n      const { name, value } = e.target;\r\n      setEditableUser({ ...editableUser, [name]: value });\r\n    }\r\n  };\r\n\r\n  const handleUpdate = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (editableUser) {\r\n      updateUserInLocalStorage(editableUser);\r\n      setUser(editableUser);\r\n      alert('Datos actualizados con éxito. Cierre sesión y vuelva a ingresar para refrescar los datos');\r\n    } else {\r\n      setError('No se pudo actualizar los datos del usuario');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <p>Cargando datos del usuario...</p>;\r\n  }\r\n\r\n  return (\r\n    <div className='body'>\r\n      <nav className=\"navbar\">\r\n        <ul className=\"navbar-links\">\r\n          <li><Link to=\"/login\">Cerrar sesión</Link></li>\r\n          <li><Link to=\"/carnet\">Carnet</Link></li>\r\n          <li><Link to=\"/historial\">Historial</Link></li>\r\n        </ul>\r\n      </nav>\r\n      \r\n      <div className=\"perfil-container\">\r\n        <h2>Perfil de Usuario</h2>\r\n        {user && editableUser ? (\r\n          <form className=\"perfil-form\" onSubmit={handleUpdate}>\r\n            <input\r\n              type=\"text\"\r\n              name=\"username\"\r\n              placeholder=\"Nombre de usuario\"\r\n              value={editableUser.username}\r\n              onChange={handleInputChange}\r\n              required\r\n              readOnly\r\n            />\r\n            <input\r\n              type=\"text\"\r\n              name=\"nombre\"\r\n              placeholder=\"Nombre\"\r\n              value={editableUser.nombre}\r\n              onChange={handleInputChange}\r\n              required\r\n            />\r\n            <input\r\n              type=\"text\"\r\n              name=\"apellido\"\r\n              placeholder=\"Apellido\"\r\n              value={editableUser.apellido}\r\n              onChange={handleInputChange}\r\n              required\r\n            />\r\n            <input\r\n              type=\"password\"\r\n              name=\"password\"\r\n              placeholder=\"Contraseña\"\r\n              value={editableUser.password}\r\n              onChange={handleInputChange}\r\n              required\r\n            />\r\n            <input\r\n              type=\"text\"\r\n              name=\"cedula\"\r\n              placeholder=\"Cédula\"\r\n              value={editableUser.cedula}\r\n              onChange={handleInputChange}\r\n              required\r\n            />\r\n            <input\r\n              type=\"date\"\r\n              name=\"fechaNacimiento\"\r\n              placeholder=\"Fecha de nacimiento\"\r\n              value={editableUser.fechaNacimiento}\r\n              onChange={handleInputChange}\r\n              required\r\n            />\r\n            <input\r\n              type=\"email\"\r\n              name=\"correo\"\r\n              placeholder=\"Correo\"\r\n              value={editableUser.correo}\r\n              onChange={handleInputChange}\r\n              required\r\n            />\r\n            <input\r\n              type=\"text\"\r\n              name=\"ciudad\"\r\n              placeholder=\"Ciudad\"\r\n              value={editableUser.ciudad}\r\n              onChange={handleInputChange}\r\n              required\r\n            />\r\n            <input\r\n              type=\"text\"\r\n              name=\"direccion\"\r\n              placeholder=\"Dirección\"\r\n              value={editableUser.direccion}\r\n              onChange={handleInputChange}\r\n              required \r\n            />\r\n            <select\r\n              name=\"estado\"\r\n              value={editableUser.estado}\r\n              onChange={handleInputChange}\r\n              required\r\n            >\r\n              <option value=\"\">Seleccione su estado civil</option>\r\n              <option value=\"soltero\">Soltero</option>\r\n              <option value=\"casado\">Casado</option>\r\n              <option value=\"divorciado\">Divorciado</option>\r\n              <option value=\"viudo\">Viudo</option>\r\n            </select>\r\n            <input\r\n              type=\"text\"\r\n              name=\"telefono\"\r\n              placeholder=\"Teléfono\"\r\n              value={editableUser.telefono}\r\n              onChange={handleInputChange}\r\n              required\r\n            />\r\n            <select\r\n              name=\"sexo\"\r\n              value={editableUser.sexo}\r\n              onChange={handleInputChange}\r\n              required\r\n            >\r\n              <option value=\"\">Seleccione su sexo</option>\r\n              <option value=\"femenino\">Femenino</option>\r\n              <option value=\"masculino\">Masculino</option>\r\n            </select>\r\n            <select\r\n              name=\"discapacidad\"\r\n              value={editableUser.discapacidad}\r\n              onChange={handleInputChange}\r\n              required\r\n            >\r\n              <option value=\"\">Seleccione su discapacidad</option>\r\n              <option value=\"auditiva\">Auditiva</option>\r\n              <option value=\"visual\">Visual</option>\r\n              <option value=\"motora\">Motora</option>\r\n              <option value=\"cognitiva\">Cognitiva</option>\r\n              <option value=\"ninguna\">Ninguna</option>\r\n            </select>\r\n            {error && <p className=\"error\">{error}</p>}\r\n            <button type=\"submit\">Actualizar</button>\r\n          </form>\r\n        ) : (\r\n          <p>Cargando datos del usuario...</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Perfil;\r\n","// ../../utils/auth.ts\r\nimport { User } from '../utils/users';\r\n\r\nconst USERS_KEY = 'users';\r\nconst LOGGED_IN_USER_KEY = 'loggedInUser';\r\n\r\nexport const saveUserToLocalStorage = (user: User) => {\r\n  const users = JSON.parse(localStorage.getItem(USERS_KEY) || '[]');\r\n  users.push(user);\r\n  localStorage.setItem(USERS_KEY, JSON.stringify(users));\r\n};\r\n\r\nexport const getUsersFromLocalStorage = (): User[] => {\r\n  return JSON.parse(localStorage.getItem(USERS_KEY) || '[]');\r\n};\r\n\r\nexport const deleteUserFromLocalStorage = (username: string) => {\r\n  const users = JSON.parse(localStorage.getItem(USERS_KEY) || '[]');\r\n  const updatedUsers = users.filter((user: User) => user.username !== username);\r\n  localStorage.setItem(USERS_KEY, JSON.stringify(updatedUsers));\r\n};\r\n\r\nexport const authenticateUser = (username: string, password: string): User | null => {\r\n  const users = getUsersFromLocalStorage();\r\n  const user = users.find(u => u.username === username && u.password === password);\r\n  if (user) {\r\n    localStorage.setItem(LOGGED_IN_USER_KEY, JSON.stringify(user));\r\n    return user;\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const getLoggedInUser = (): User | null => {\r\n  const user = localStorage.getItem(LOGGED_IN_USER_KEY);\r\n  return user ? JSON.parse(user) : null;\r\n};\r\n\r\nexport const updateUserInLocalStorage = (updatedUser: User) => {\r\n  const users = JSON.parse(localStorage.getItem(USERS_KEY) || '[]');\r\n  const updatedUsers: User[] = users.map((user: User) =>\r\n    user.username === updatedUser.username ? updatedUser : user\r\n  );\r\n  localStorage.setItem(USERS_KEY, JSON.stringify(updatedUsers));\r\n\r\n  // También actualizar el usuario actualmente autenticado\r\n  localStorage.setItem(LOGGED_IN_USER_KEY, JSON.stringify(updatedUser));\r\n};\r\n"],"names":["Perfil","user","setUser","useState","editableUser","setEditableUser","loading","setLoading","error","setError","useEffect","loggedInUser","getLoggedInUser","handleInputChange","e","name","value","target","_jsx","children","_jsxs","className","Link","to","onSubmit","preventDefault","updateUserInLocalStorage","alert","type","placeholder","username","onChange","required","readOnly","nombre","apellido","password","cedula","fechaNacimiento","correo","ciudad","direccion","estado","telefono","sexo","discapacidad","USERS_KEY","LOGGED_IN_USER_KEY","saveUserToLocalStorage","users","JSON","parse","localStorage","getItem","push","setItem","stringify","authenticateUser","find","u","updatedUser","updatedUsers","map"],"sourceRoot":""}